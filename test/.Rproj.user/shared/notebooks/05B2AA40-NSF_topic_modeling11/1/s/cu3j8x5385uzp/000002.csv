"0","# Read in the file"
"0","MyData <- read.csv(""data/CNS.csv"", header=TRUE, encoding = ""UTF-8"", stringsAsFactors=FALSE) # tab delimited"
"0",""
"0","# pull off the directory part of the file name to use later for saving output files."
"0","#topicDir <- tools::file_path_sans_ext(filename)"
"0","topicDir <- ""Awards_CNS"""
"0",""
"0","dir.create(topicDir, showWarnings = FALSE)"
"0",""
"0",""
"0",""
"0","# decide on which parts of the curve to analyze"
"0","# User must enter the # on the console!"
"0","library(dplyr)"
"2","
Attaching package: â€˜dplyrâ€™

"
"2","The following objects are masked from â€˜package:statsâ€™:

    filter, lag

"
"2","The following objects are masked from â€˜package:baseâ€™:

    intersect, setdiff, setequal, union

"
"0","nsf_funding <- data_frame(id = as.character(MyData$AwardNumber),"
"0","                          abstract = MyData$Abstract,"
"0","                          amount = MyData$AwardedAmountToDate)"
"2","Warning:"
"2"," `data_frame()` was deprecated in tibble 1.1.0.
Please use `tibble()` instead.
[90mThis warning is displayed once every 8 hours.[39m
[90mCall `lifecycle::last_warnings()` to see where this warning was generated.[39m
"
"0","# remove html tags in the form <anything>"
"0","# ??? drop records with empty abstracts"
"0","# changed PBH 2019-02-27 to put in a space when html is replaced"
"0","nsf_funding$abstract <- gsub(""<[^>]+>"", "" "", nsf_funding$abstract)"
"0","# remove where the word is a number"
"0","nsf_funding$abstract <- gsub(""\\d"", """", nsf_funding$abstract)"
"0","# if there are any ""words"" with imbedded periods Eg ""John.P.Doud, replace the peroid with a space."
"0","nsf_funding$abstract <- gsub(""\\."", "" "", nsf_funding$abstract)"
"0","# remove ""'s"""
"0","nsf_funding$abstract <- gsub(""'s"", """", nsf_funding$abstract) # to fix eg trichoptera:hydropsychidae "
"0","nsf_funding$abstract <- gsub("":"", "" "", nsf_funding$abstract)"
"0","#nsf_funding$abstract <- nsf_funding[-grep('^\\d+$', nsf_funding$abstract),]"
"0","# Convert the string repreentation of numbers in the amount field by removing ""$"" and "","""
"0","nsf_funding$amount <- as.numeric(gsub('[$,]', '', nsf_funding$amount))"
"0",""
"0","# sort the abstracts by the amount awarded"
"0","#abstract_sort <- nsf_funding %>% "
"0","nsf_funding <- nsf_funding[order(-nsf_funding$amount), ]"
"0",""
"0","statedPercent <- 100"
"0","# if statedPercent is not set in the code ask the user"
"0","if(!exists(""statedPercent"")){statedPercent <- readpercent();}"
"0","# if it is negative then it is really the tail and the head is the length the array minus that amount"
"0",""
"0","#This displays on the screen"
"0","HistogramFun(nsf_funding$amount/1000000, statedPercent, nrow(nsf_funding))"
"1","typeof funding"
"1"," "
"1","double"
"1"," "
"1","typeof nrows"
"1"," "
"1","integer"
"1"," "
"1","nrows funding "
"1"," "
"1","integer"
"1"," "
"1","numRows::"
"1"," "
"1","3000"
"1"," "
"1","
"
